/* ─────────────────────────────────────────────────────────────────────────────
   Calendar page — full-width, Teams-style layout with Apple aesthetics
───────────────────────────────────────────────────────────────────────────── */

.container {
  min-height: 100vh;
  background: transparent;
  display: flex;
  flex-direction: column;
}

.main {
  flex: 1;
  padding: 1rem 1.25rem 1.25rem;
  width: 100%;
  overflow-x: auto;
}

/* ─────────────────────────────────────────────────────────
   HEADER CONTROLS (navigation bar)
───────────────────────────────────────────────────────── */
.calendarHeader {
  margin-bottom: 0.85rem;
}

.headerControls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.9rem;
  padding: 0.65rem 0.9rem;
  border-radius: 14px;
  border: 1px solid color-mix(in srgb, var(--color-border) 86%, white 14%);
  background: color-mix(in srgb, var(--color-bg-elevated) 88%, white 12%);
  box-shadow: var(--shadow-sm);
}

.headerControls button {
  padding: 0.45rem 0.85rem;
  background: var(--color-surface-muted);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.88rem;
  color: var(--color-text);
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
  font-weight: 600;
}

.headerControls button:hover {
  background: var(--color-surface-strong);
  border-color: var(--color-border-strong);
  transform: translateY(-1px);
}

.headerControls h2 {
  font-size: 1rem;
  color: var(--color-text);
  min-width: 240px;
  font-weight: 560;
  letter-spacing: -0.02em;
  margin: 0;
  text-align: center;
}

.todayButton {
  margin-left: auto;
  background: var(--color-surface);
}

.viewSwitcher {
  display: flex;
  gap: 0.35rem;
  margin-left: 0.5rem;
}

.viewButton,
.viewActive {
  padding: 0.44rem 0.78rem;
  background: color-mix(in srgb, var(--color-surface) 72%, white 28%);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.84rem;
  color: var(--color-text-soft);
  transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast);
  font-weight: 600;
  cursor: pointer;
}

.viewButton:hover {
  background: var(--color-surface-strong);
  border-color: var(--color-border-strong);
  color: var(--color-text);
}

.viewActive {
  background: color-mix(in srgb, var(--color-accent) 18%, var(--color-surface));
  border-color: color-mix(in srgb, var(--color-accent) 44%, var(--color-border));
  color: var(--color-accent);
}

/* ─────────────────────────────────────────────────────────
   LAYOUT: Calendar + Day Panel side-by-side
───────────────────────────────────────────────────────── */
.calendarWithPanel {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}

.calendarWithPanel > :first-child {
  flex: 1;
  min-width: 0;
}

@media (max-width: 1024px) {
  .calendarWithPanel {
    flex-direction: column;
  }
}

/* ─────────────────────────────────────────────────────────
   WEEK GRID — CSS Grid: 64px time gutter + 7 day columns
───────────────────────────────────────────────────────── */
.weekGrid {
  display: flex;
  flex-direction: column;
  background: color-mix(in srgb, var(--color-surface) 92%, white 8%);
  border: 1px solid color-mix(in srgb, var(--color-border) 84%, white 16%);
  border-radius: 14px;
  box-shadow: 0 20px 36px color-mix(in srgb, var(--color-bg) 70%, transparent);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  overflow: hidden;
}

/* Header row: blank corner + 7 day headers */
.weekHeaderRow {
  display: grid;
  grid-template-columns: 56px repeat(7, 1fr);
  border-bottom: 1px solid var(--color-border);
  background: color-mix(in srgb, var(--color-surface) 96%, white 4%);
  flex-shrink: 0;
}

.weekCorner {
  border-right: 1px solid var(--color-border);
}

.weekDayHeader {
  padding: 0.75rem 0.5rem;
  text-align: center;
  border-right: 1px solid var(--color-border);
  cursor: pointer;
  transition: background var(--transition-fast);
  user-select: none;
}

.weekDayHeader:last-child {
  border-right: none;
}

.weekDayHeader:hover {
  background: color-mix(in srgb, var(--color-accent) 8%, transparent);
}

.weekDayHeader.isSelectedDay {
  background: color-mix(in srgb, var(--color-accent) 12%, transparent);
}

/* Body row: scrollable time gutter + day columns */
.weekBody {
  display: grid;
  grid-template-columns: 56px repeat(7, 1fr);
  overflow-y: auto;
  max-height: calc(100vh - 210px);
  min-height: 400px;
}

/* Time gutter */
.timeGutter {
  border-right: 1px solid var(--color-border);
  background: color-mix(in srgb, var(--color-surface) 94%, white 6%);
  position: sticky;
  left: 0;
  z-index: 2;
}

.timeSlot {
  height: 64px;
  padding: 0 0.45rem 0 0.3rem;
  font-size: 0.67rem;
  color: var(--color-text-soft);
  /* border-top aligns hour label with grid line */
  border-top: 1px solid color-mix(in srgb, var(--color-border) 55%, transparent);
  display: flex;
  align-items: flex-start;
  justify-content: flex-end;
  padding-top: 0.3rem;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.01em;
}

/* Hide the top border on the first time slot to avoid double line */
.timeGutter > .timeSlot:first-child {
  border-top: none;
}

/* Individual day columns */
.weekDayColumn {
  border-right: 1px solid var(--color-border);
  position: relative;
  height: calc(11 * 64px); /* 11 hours × 64px */
}

.weekDayColumn:last-child {
  border-right: none;
}

.weekDayColumn.isToday {
  background: color-mix(in srgb, var(--color-accent) 4%, transparent);
}

/* Clickable hour slots */
.slot {
  height: 64px;
  /* border-top so hour lines align with hour labels */
  border-top: 1px solid color-mix(in srgb, var(--color-border) 55%, transparent);
  position: relative;
  cursor: pointer;
  transition: background var(--transition-fast);
}

/* Hide the top border on the first slot to avoid double line */
.weekDayColumn > .slot:first-child {
  border-top: none;
}

/* Half-hour guide line */
.slot::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 1px;
  background: color-mix(in srgb, var(--color-border) 30%, transparent);
  pointer-events: none;
}

/* Current-time red indicator */
.currentTimeLine {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: #ef4444;
  z-index: 30;
  pointer-events: none;
  box-shadow: 0 0 6px rgba(239, 68, 68, 0.5);
}

.currentTimeLine::before {
  content: '';
  position: absolute;
  left: -4px;
  top: -4px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #ef4444;
}

/* ─────────────────────────────────────────────────────────
   DAY NAME / NUMBER styles (used in header row)
───────────────────────────────────────────────────────── */
.dayName {
  font-size: 0.68rem;
  color: var(--color-text-soft);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  margin-bottom: 0.22rem;
  font-weight: 500;
}

.dayNumber {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text);
  letter-spacing: -0.03em;
  line-height: 1;
}

.dayNumber.isToday {
  background: var(--color-accent);
  color: var(--color-accent-contrast);
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  margin: 0 auto;
}

.slot:hover {
  background: color-mix(in srgb, var(--color-accent) 10%, transparent);
}

.slot:focus-visible {
  outline: none;
  background: color-mix(in srgb, var(--color-accent) 16%, transparent);
  box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--color-accent) 55%, transparent);
}

.slot.dragOver {
  background: color-mix(in srgb, var(--color-accent) 18%, transparent);
  box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--color-accent) 70%, transparent);
  animation: pulseDragOver 0.8s ease-in-out infinite;
}

@keyframes pulseDragOver {
  0%, 100% { box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--color-accent) 70%, transparent); }
  50%       { box-shadow: inset 0 0 0 3px color-mix(in srgb, var(--color-accent) 90%, transparent); }
}

/* ─────────────────────────────────────────────────────────
   APPOINTMENT BLOCKS (inside week columns)
───────────────────────────────────────────────────────── */
.appointment {
  position: absolute;
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-accent) 70%, white 30%),
    color-mix(in srgb, var(--color-accent) 82%, black 18%));
  color: var(--color-accent-contrast);
  padding: 0.38rem 0.42rem;
  border-radius: 9px;
  font-size: 0.68rem;
  z-index: 10;
  overflow: hidden;
  font-weight: 400;
  box-sizing: border-box;
  margin: 0 2px;
  cursor: pointer;
  transition: opacity var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
  min-width: 0;
  border: 1px solid color-mix(in srgb, var(--color-accent) 55%, white 45%);
  box-shadow: 0 6px 12px color-mix(in srgb, var(--color-accent) 18%, transparent);
}

.appointment:hover {
  opacity: 1;
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 8px 20px color-mix(in srgb, var(--color-accent) 32%, transparent);
}

.appointment:focus-visible,
.monthAppointment:focus-visible,
.monthDay:focus-visible,
.closeButton:focus-visible,
.editButton:focus-visible,
.deleteButton:focus-visible,
.saveButton:focus-visible,
.cancelButton:focus-visible,
.headerControls button:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.appointment.scheduled {
  background: var(--gradient-accent);
  color: var(--color-accent-contrast);
}

.appointment.completed {
  background: var(--color-border);
  color: var(--color-text-soft);
  border: 1px solid var(--color-border-strong);
}

.appointment.cancelled {
  background: var(--color-border);
  color: var(--color-text-soft);
  border: 1px solid var(--color-border-strong);
  opacity: 0.5;
}

.appointment.no_show {
  background: var(--color-border);
  color: var(--color-text-soft);
  border: 1px solid var(--color-border-strong);
}

.appointment.dragging {
  opacity: 0.5;
  cursor: move;
  transform: rotate(2deg);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  z-index: 1000;
}

.appointment[draggable="true"]:not(.dragging) { cursor: grab; }
.appointment[draggable="true"]:active          { cursor: grabbing; }

.appointmentHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.3rem;
  margin-bottom: 0.15rem;
}

.appointmentTitle {
  font-weight: 500;
  font-size: 0.7rem;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.appointmentService {
  font-size: 0.64rem;
  opacity: 0.8;
}

.statusBadge {
  font-size: 0.58rem;
  padding: 0.14rem 0.32rem;
  border-radius: 5px;
  font-weight: 500;
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  flex-shrink: 0;
}

.statusBadge--scheduled {
  background: rgba(59, 130, 246, 0.25);
  color: rgb(59, 130, 246);
  border: 1px solid rgba(59, 130, 246, 0.4);
}

.statusBadge--completed {
  background: rgba(34, 197, 94, 0.25);
  color: rgb(34, 197, 94);
  border: 1px solid rgba(34, 197, 94, 0.4);
}

.statusBadge--cancelled {
  background: rgba(239, 68, 68, 0.25);
  color: rgb(239, 68, 68);
  border: 1px solid rgba(239, 68, 68, 0.4);
}

.statusBadge--no-show {
  background: rgba(156, 163, 175, 0.25);
  color: rgb(156, 163, 175);
  border: 1px solid rgba(156, 163, 175, 0.4);
}

/* ─────────────────────────────────────────────────────────
   BLOCKED TIME BLOCKS
───────────────────────────────────────────────────────── */
.blockedTime {
  position: absolute;
  background: repeating-linear-gradient(
    45deg,
    rgba(156, 163, 175, 0.15),
    rgba(156, 163, 175, 0.15) 10px,
    rgba(156, 163, 175, 0.08) 10px,
    rgba(156, 163, 175, 0.08) 20px
  );
  border: 1px dashed rgba(156, 163, 175, 0.5);
  border-radius: 8px;
  padding: 0.4rem;
  font-size: 0.65rem;
  z-index: 5;
  overflow: hidden;
  box-sizing: border-box;
  margin: 0 2px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.2rem;
  color: rgba(100, 116, 139, 0.9);
}

.blockedTimeIcon   { font-size: 1rem; opacity: 0.7; }
.blockedTimeReason { font-weight: 500; text-align: center; line-height: 1.2; word-break: break-word; }
.recurringIndicator { font-size: 0.8rem; opacity: 0.6; margin-top: 0.1rem; }

/* ─────────────────────────────────────────────────────────
   MONTH VIEW
───────────────────────────────────────────────────────── */
.monthCalendar {
  background: color-mix(in srgb, var(--color-surface) 92%, white 8%);
  border: 1px solid color-mix(in srgb, var(--color-border) 84%, white 16%);
  border-radius: 14px;
  box-shadow: 0 20px 36px color-mix(in srgb, var(--color-bg) 70%, transparent);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  overflow: hidden;
}

.monthWeekDays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  border-bottom: 1px solid var(--color-border);
}

.monthWeekDay {
  padding: 0.8rem;
  text-align: center;
  font-size: 0.76rem;
  color: var(--color-text-soft);
  font-weight: 500;
  letter-spacing: 0.02em;
  border-right: 1px solid var(--color-border);
}

.monthWeekDay:last-child { border-right: none; }

.monthGrid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
}

.monthDay {
  min-height: 110px;
  border-right: 1px solid var(--color-border);
  border-bottom: 1px solid var(--color-border);
  padding: 0.45rem;
  cursor: pointer;
  transition: background var(--transition-fast);
  position: relative;
}

.monthDay:hover {
  background: color-mix(in srgb, var(--color-accent) 8%, transparent);
}

.monthDay:nth-child(7n), .monthDay:last-child { border-right: none; }

.monthDayOther   { opacity: 0.38; }

.monthDayToday {
  background: color-mix(in srgb, var(--color-accent) 8%, transparent);
}

.monthDaySelected {
  background: color-mix(in srgb, var(--color-accent) 13%, transparent);
  box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--color-accent) 35%, transparent);
}

.monthDayNumber {
  font-size: 0.88rem;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 0.35rem;
}

.monthDayToday .monthDayNumber {
  background: var(--gradient-accent);
  color: var(--color-accent-contrast);
  width: 22px;
  height: 22px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  margin-bottom: 0.35rem;
}

.monthDayAppointments {
  display: flex;
  flex-direction: column;
  gap: 0.18rem;
}

.monthAppointment {
  font-size: 0.68rem;
  padding: 0.18rem 0.38rem;
  border-radius: var(--radius-sm);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  background: var(--color-border);
  color: var(--color-text);
  border: 1px solid var(--color-border-strong);
}

.monthAppointment.scheduled {
  background: var(--gradient-accent);
  color: var(--color-accent-contrast);
}

.monthAppointment.completed {
  background: var(--color-border);
  color: var(--color-text-soft);
  opacity: 0.7;
}

.monthAppointment.cancelled {
  background: var(--color-border);
  color: var(--color-text-soft);
  opacity: 0.5;
}

.monthAppointmentMore {
  font-size: 0.63rem;
  color: var(--color-text-soft);
  padding: 0.15rem 0.38rem;
  font-weight: 500;
}

/* ─────────────────────────────────────────────────────────
   MODAL OVERLAY
───────────────────────────────────────────────────────── */
.modalOverlay {
  position: fixed;
  inset: 0;
  background: color-mix(in srgb, var(--color-bg) 76%, transparent);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(var(--blur-sm));
  animation: overlayFadeIn var(--transition-fast);
}

@keyframes overlayFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  padding: 1.75rem;
  width: 90%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-lg);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
}

.modal h3 {
  font-size: 1.18rem;
  margin-bottom: 1.2rem;
  color: var(--color-text);
  font-weight: 500;
  letter-spacing: -0.01em;
}

.modalContent {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.modalField {
  display: flex;
  flex-direction: column;
  gap: 0.38rem;
}

.modalField label {
  font-size: 0.78rem;
  font-weight: 400;
  color: var(--color-text-soft);
}

.modalField input,
.modalField select,
.modalField textarea {
  padding: 0.72rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  color: var(--color-text);
  background: var(--color-surface-muted);
  transition: border-color var(--transition-fast), background var(--transition-fast);
}

.modalField input:focus,
.modalField select:focus,
.modalField textarea:focus {
  outline: none;
  border-color: var(--color-accent);
  background: var(--color-surface-strong);
  box-shadow: var(--focus-ring);
}

.checkboxLabel {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  font-size: 0.9rem !important;
  font-weight: 500 !important;
  color: var(--color-text) !important;
}

.checkboxLabel input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-accent);
}

.recurringOptions {
  padding: 1rem;
  background: color-mix(in srgb, var(--color-surface-muted) 50%, transparent);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  display: flex;
  flex-direction: column;
  gap: 0.9rem;
}

/* ─────────────────────────────────────────────────────────
   CONFLICT MODAL
───────────────────────────────────────────────────────── */
.conflictSection {
  padding: 1rem;
  background: rgba(239, 68, 68, 0.08);
  border: 1px solid rgba(239, 68, 68, 0.25);
  border-radius: var(--radius-md);
}

.sectionTitle {
  font-size: 0.82rem;
  font-weight: 500;
  color: var(--color-text);
  margin: 0 0 0.7rem 0;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.conflictList { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.5rem; }
.conflictItem { display: flex; flex-direction: column; gap: 0.2rem; font-size: 0.85rem; }
.conflictType { font-weight: 500; color: rgb(239, 68, 68); }
.conflictMessage { color: var(--color-text-soft); }

.suggestionsSection { margin-top: 1rem; }
.suggestionsList    { display: flex; flex-direction: column; gap: 0.6rem; }

.suggestionButton {
  padding: 0.8rem;
  background: var(--color-surface-muted);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  text-align: left;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.suggestionButton:hover {
  background: var(--color-surface-strong);
  border-color: var(--color-accent);
  transform: translateX(4px);
}

.suggestionTime   { font-weight: 500; font-size: 0.9rem; color: var(--color-text); }
.suggestionReason { font-size: 0.8rem; color: var(--color-text-soft); }

.noSuggestions {
  padding: 1rem;
  text-align: center;
  color: var(--color-text-soft);
  font-size: 0.85rem;
  background: var(--color-surface-muted);
  border-radius: var(--radius-md);
}

/* ─────────────────────────────────────────────────────────
   QUICK ACTION BUTTONS (preview modal)
───────────────────────────────────────────────────────── */
.quickActionsSection {
  margin-top: 1.4rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-border);
}

.quickActionsLabel {
  font-size: 0.78rem;
  font-weight: 500;
  color: var(--color-text-soft);
  margin: 0 0 0.7rem 0;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.quickActionButtons { display: flex; gap: 0.6rem; flex-wrap: wrap; }

.quickActionButton {
  flex: 1;
  min-width: 96px;
  padding: 0.62rem 0.85rem;
  border-radius: var(--radius-md);
  font-size: 0.84rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
  border: 1px solid;
}

.quickActionCompleted { background: rgba(34, 197, 94, 0.15); color: rgb(34, 197, 94); border-color: rgba(34, 197, 94, 0.3); }
.quickActionCompleted:hover { background: rgba(34, 197, 94, 0.25); border-color: rgba(34, 197, 94, 0.5); transform: translateY(-2px); }

.quickActionCancelled { background: rgba(239, 68, 68, 0.15); color: rgb(239, 68, 68); border-color: rgba(239, 68, 68, 0.3); }
.quickActionCancelled:hover { background: rgba(239, 68, 68, 0.25); border-color: rgba(239, 68, 68, 0.5); transform: translateY(-2px); }

.quickActionNoShow { background: rgba(156, 163, 175, 0.15); color: rgb(156, 163, 175); border-color: rgba(156, 163, 175, 0.3); }
.quickActionNoShow:hover { background: rgba(156, 163, 175, 0.25); border-color: rgba(156, 163, 175, 0.5); transform: translateY(-2px); }

/* ─────────────────────────────────────────────────────────
   MODAL ACTIONS / BUTTONS
───────────────────────────────────────────────────────── */
.modalActions {
  display: flex;
  gap: 0.9rem;
  justify-content: flex-end;
  margin-top: 1.2rem;
}

.cancelButton {
  padding: 0.72rem 1.35rem;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-weight: 400;
  color: var(--color-text-soft);
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
  font-size: 0.9rem;
}

.cancelButton:hover {
  background: var(--color-surface-strong);
  border-color: var(--color-border-strong);
  color: var(--color-text);
  transform: translateY(-1px);
}

.saveButton {
  padding: 0.72rem 1.35rem;
  background: var(--gradient-accent);
  color: var(--color-accent-contrast);
  border: 1px solid var(--color-border-strong);
  border-radius: var(--radius-md);
  font-weight: 650;
  transition: filter var(--transition-fast), transform var(--transition-fast);
  font-size: 0.9rem;
}

.saveButton:hover {
  filter: brightness(1.07);
  transform: translateY(-1px);
}

/* ─────────────────────────────────────────────────────────
   PREVIEW MODAL (Apple-style)
───────────────────────────────────────────────────────── */
.previewModal {
  background: color-mix(in srgb, var(--color-bg) 35%, var(--color-surface-strong));
  backdrop-filter: blur(calc(var(--blur-md) + 6px));
  -webkit-backdrop-filter: blur(calc(var(--blur-md) + 6px));
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow: hidden;
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-lg);
  animation: modalFadeIn 0.28s cubic-bezier(0.16, 1, 0.3, 1);
  display: flex;
  flex-direction: column;
}

@keyframes modalFadeIn {
  from { opacity: 0; transform: scale(0.95) translateY(-10px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}

.previewHeader {
  padding: 1.4rem 1.6rem;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.previewTitle    { font-size: 1.45rem; font-weight: 600; color: var(--color-text); margin: 0; letter-spacing: -0.02em; line-height: 1.3; }
.previewSubtitle { font-size: 0.92rem; color: var(--color-text-soft); margin: 0.35rem 0 0; font-weight: 400; }

.closeButton {
  background: transparent;
  border: none;
  color: var(--color-text-soft);
  font-size: 1.8rem;
  line-height: 1;
  cursor: pointer;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
  margin-top: -0.2rem;
}

.closeButton:hover { background: var(--color-surface-muted); color: var(--color-text); transform: scale(1.1); }

.previewContent { padding: 1.6rem; overflow-y: auto; flex: 1; }
.previewSection { display: flex; flex-direction: column; gap: 1.2rem; }
.previewRow     { display: flex; flex-direction: column; gap: 0.45rem; }
.previewLabel   { font-size: 0.72rem; font-weight: 500; color: var(--color-text-soft); text-transform: uppercase; letter-spacing: 0.5px; }
.previewValue   { font-size: 1rem; color: var(--color-text); font-weight: 400; line-height: 1.5; }

.previewStatusBadge {
  display: inline-block;
  padding: 0.3rem 0.7rem;
  border-radius: var(--radius-md);
  font-size: 0.8rem;
  font-weight: 500;
  text-transform: capitalize;
  letter-spacing: 0.3px;
}

.previewStatusBadge.scheduled {
  background: color-mix(in srgb, var(--color-success) 20%, transparent);
  color: color-mix(in srgb, var(--color-success) 72%, white);
  border: 1px solid color-mix(in srgb, var(--color-success) 36%, transparent);
}

.previewStatusBadge.completed {
  background: color-mix(in srgb, var(--color-text-soft) 16%, transparent);
  color: var(--color-text-muted);
  border: 1px solid var(--color-border);
}

.previewStatusBadge.cancelled {
  background: color-mix(in srgb, var(--color-danger) 20%, transparent);
  color: color-mix(in srgb, var(--color-danger) 78%, white);
  border: 1px solid color-mix(in srgb, var(--color-danger) 36%, transparent);
}

.previewStatusBadge.no_show {
  background: color-mix(in srgb, var(--color-danger) 14%, var(--color-accent) 8%);
  color: color-mix(in srgb, var(--color-danger) 42%, white);
  border: 1px solid color-mix(in srgb, var(--color-danger) 34%, var(--color-accent) 16%);
}

.previewActions {
  padding: 1.1rem 1.6rem;
  border-top: 1px solid var(--color-border);
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
}

.editButton {
  padding: 0.7rem 1.4rem;
  background: var(--gradient-accent);
  color: var(--color-accent-contrast);
  border: none;
  border-radius: var(--radius-md);
  font-size: 0.92rem;
  font-weight: 500;
  cursor: pointer;
  transition: filter var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
  letter-spacing: -0.01em;
}

.editButton:hover { filter: brightness(1.07); transform: translateY(-1px); box-shadow: var(--shadow-md); }
.editButton:active { transform: translateY(0); }

.deleteButton {
  padding: 0.7rem 1.4rem;
  background: transparent;
  color: color-mix(in srgb, var(--color-danger) 78%, white);
  border: 1px solid color-mix(in srgb, var(--color-danger) 45%, transparent);
  border-radius: var(--radius-md);
  font-size: 0.92rem;
  font-weight: 500;
  cursor: pointer;
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
  letter-spacing: -0.01em;
}

.deleteButton:hover { background: color-mix(in srgb, var(--color-danger) 18%, transparent); border-color: color-mix(in srgb, var(--color-danger) 68%, transparent); transform: translateY(-1px); }
.deleteButton:active { transform: translateY(0); }

/* ─────────────────────────────────────────────────────────
   DELETE CONFIRM SHEET
───────────────────────────────────────────────────────── */
.deleteSheet {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  padding: 1.25rem 1.5rem;
  width: min(92vw, 480px);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-lg);
}

.createSheet { max-width: 560px; }
.sheetDescription { margin: 0.5rem 0 0; color: var(--color-text-soft); line-height: 1.5; }

/* ─────────────────────────────────────────────────────────
   HEADER — range label as button + hidden date input
───────────────────────────────────────────────────────── */
.rangeLabelBtn {
  font-size: 1rem;
  color: var(--color-text);
  min-width: 240px;
  font-weight: 560;
  letter-spacing: -0.02em;
  margin: 0;
  text-align: center;
  cursor: pointer;
  border-radius: 8px;
  padding: 0.2rem 0.5rem;
  transition: background 120ms ease, color 120ms ease;
  user-select: none;
}
.rangeLabelBtn:hover {
  background: color-mix(in srgb, var(--color-accent) 10%, transparent);
  color: var(--color-accent);
}

.hiddenDateInput {
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
  border: none;
  padding: 0;
  margin: 0;
}

/* ─────────────────────────────────────────────────────────
   HEADER — filter select
───────────────────────────────────────────────────────── */
.filterSelect {
  padding: 0.45rem 0.75rem;
  background: var(--color-surface-muted);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.84rem;
  color: var(--color-text);
  cursor: pointer;
  transition: background var(--transition-fast), border-color var(--transition-fast);
}
.filterSelect:hover {
  background: var(--color-surface-strong);
  border-color: var(--color-border-strong);
}

/* ─────────────────────────────────────────────────────────
   HEADER — search bar
───────────────────────────────────────────────────────── */
.searchWrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.searchIcon {
  position: absolute;
  left: 0.6rem;
  font-size: 1.05rem;
  color: var(--color-text-soft);
  pointer-events: none;
  line-height: 1;
}

.searchInput {
  padding: 0.44rem 0.75rem 0.44rem 2rem;
  background: var(--color-surface-muted);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.84rem;
  color: var(--color-text);
  width: 200px;
  transition: background var(--transition-fast), border-color var(--transition-fast), width 200ms ease;
}
.searchInput::placeholder { color: var(--color-text-soft); }
.searchInput:focus {
  outline: none;
  border-color: color-mix(in srgb, var(--color-accent) 60%, var(--color-border));
  background: var(--color-surface);
  width: 260px;
}

/* ─────────────────────────────────────────────────────────
   MODAL — category picker
───────────────────────────────────────────────────────── */
.categoryPicker {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.categoryChip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.3rem 0.7rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 570;
  cursor: pointer;
  border: 1px solid color-mix(in srgb, var(--chip-color, var(--color-border)) 50%, var(--color-border));
  background: color-mix(in srgb, var(--chip-color, var(--color-accent)) 10%, var(--color-surface));
  color: var(--chip-color, var(--color-text));
  transition: background 120ms ease, transform 120ms ease, box-shadow 120ms ease;
  min-height: unset;
}
.categoryChip:hover {
  background: color-mix(in srgb, var(--chip-color, var(--color-accent)) 20%, var(--color-surface));
  transform: translateY(-1px);
  box-shadow: 0 3px 8px color-mix(in srgb, var(--chip-color, transparent) 25%, transparent);
}
.categoryChipActive {
  background: color-mix(in srgb, var(--chip-color, var(--color-accent)) 22%, var(--color-surface)) !important;
  border-color: var(--chip-color, var(--color-accent)) !important;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--chip-color, var(--color-accent)) 30%, transparent);
}

.categoryDot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* ─────────────────────────────────────────────────────────
   RESPONSIVE
───────────────────────────────────────────────────────── */
@media (max-width: 1100px) {
  .main { padding: 0.75rem 1rem 1rem; }
  .headerControls { flex-wrap: wrap; gap: 0.6rem; }
  .headerControls h2 { min-width: 200px; }
  .todayButton { margin-left: 0; }
  .viewSwitcher { margin-left: 0; }
}

@media (max-width: 840px) {
  .monthDay { min-height: 88px; padding: 0.3rem; }
  .monthAppointment { font-size: 0.64rem; }
}

@media (max-width: 640px) {
  .main { padding: 0.5rem 0.75rem 0.75rem; }
  .modal { width: 100%; max-width: none; border-radius: var(--radius-lg) var(--radius-lg) 0 0; margin-top: auto; max-height: 85vh; }
  .deleteSheet { width: 100%; border-radius: var(--radius-lg) var(--radius-lg) 0 0; margin-top: auto; }
  .modalActions { position: sticky; bottom: 0; background: var(--color-surface); padding-top: 0.8rem; }
}
